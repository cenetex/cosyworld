"use strict";(self.webpackChunkcosyworld=self.webpackChunkcosyworld||[]).push([[717],{717:(t,e,n)=>{n.r(e),n.d(e,{loadContent:()=>i});var o=n(903);async function i(){const t=document.getElementById("content");if(!t)return;t.innerHTML='\n    <div class="max-w-7xl mx-auto px-4">\n      <h1 class="text-3xl font-bold mb-6">Collections</h1>\n      <div id="collections-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8"></div>\n      <div id="collection-view" class="hidden">\n        <button id="back-to-collections" class="mb-4 px-3 py-1.5 bg-surface-800 rounded hover:bg-surface-700">‚Üê Back</button>\n        <h2 id="collection-title" class="text-2xl font-semibold mb-2"></h2>\n        <p id="collection-desc" class="text-gray-400 mb-4"></p>\n        <div id="collection-members" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3"></div>\n        <div id="collection-loader" class="text-center py-8 hidden">\n          <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600 mx-auto"></div>\n          <p class="mt-2 text-gray-400">Loading more...</p>\n        </div>\n      </div>\n    </div>';const e=document.getElementById("collections-grid"),{collections:n}=await o.y1.list({limit:60});n?.length?(e.innerHTML=n.map(s).join(""),e.querySelectorAll("[data-coll]").forEach((t=>{t.addEventListener("click",(()=>async function(t,n,i){e.classList.add("hidden"),document.getElementById("collection-view").classList.remove("hidden"),document.getElementById("collection-title").textContent=n||t,document.getElementById("collection-desc").textContent=i||"";const s=document.getElementById("collection-members"),r=document.getElementById("collection-loader");s.innerHTML="";let c=null,a=!1,l=!0;async function d(){if(!a&&l){a=!0,r.classList.remove("hidden");try{const e=await o.y1.members(t,{limit:30,after:c,thumbs:1});(e.avatars||[]).forEach((t=>{const e=document.createElement("div");e.className="cursor-pointer hover:bg-surface-800 rounded p-2",e.innerHTML=function(t){const e=t.thumbnailUrl||t.imageUrl,n=(t.name||"?").slice(0,1).toUpperCase();return`\n    <div class="flex flex-col items-center">\n      <img src="${e}" alt="${t.name}" class="w-24 h-24 rounded-full object-cover border border-surface-700"\n           onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect fill='%23333' width='100' height='100'/%3E%3Ctext fill='%23FFF' x='50' y='50' font-size='50' text-anchor='middle' dominant-baseline='middle'%3E${n}%3C/text%3E%3C/svg%3E';">\n      <div class="mt-2 text-sm font-medium truncate w-full text-center" title="${t.name}">${t.name}</div>\n    </div>`}(t),e.onclick=()=>window.showAvatarDetails&&window.showAvatarDetails(t._id),s.appendChild(e)})),c=e.nextCursor,l=!!c}finally{a=!1,r.classList.toggle("hidden",!l)}}}window.loadMoreCollection=d,await d(),new IntersectionObserver((t=>{t[0].isIntersecting&&d()}),{threshold:.2}).observe(r)}(decodeURIComponent(t.dataset.coll),t.dataset.name?decodeURIComponent(t.dataset.name):void 0,t.dataset.desc?decodeURIComponent(t.dataset.desc):void 0)))}))):e.innerHTML='<div class="col-span-full text-center text-gray-400">No collections found.</div>',document.getElementById("back-to-collections").addEventListener("click",(()=>{document.getElementById("collection-view").classList.add("hidden"),e.classList.remove("hidden")}))}function s(t){const e=(t.name||t.key||t.id).toString(),n=(t.description||"").toString();return`\n    <div data-coll="${encodeURIComponent(t.id)}" data-name="${encodeURIComponent(e)}" data-desc="${encodeURIComponent(n)}"\n         class="flex items-start gap-3 p-3 rounded-lg bg-surface-800 hover:bg-surface-700 cursor-pointer" >\n  <img src="${t.thumbnailUrl}" alt="${e}" class="w-12 h-12 rounded object-cover border border-surface-700 flex-shrink-0"\n       onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 100 100'%3E%3Crect fill='%23333' width='100' height='100'/%3E%3Ctext fill='%23FFF' x='50' y='50' font-size='40' text-anchor='middle' dominant-baseline='middle'%3E${e.slice(0,1).toUpperCase()}%3C/text%3E%3C/svg%3E';"/>\n      <div class="flex-1 min-w-0">\n        <div class="font-semibold truncate">${e}</div>\n        ${n?`<div class="text-xs text-gray-400 line-clamp-2">${n}</div>`:""}\n        <div class="text-xs text-gray-500 mt-1">${t.count} avatars</div>\n      </div>\n    </div>`}},903:(t,e,n)=>{n.d(e,{D2:()=>r,MD:()=>s,YJ:()=>c,c3:()=>g,cy:()=>m,h5:()=>d,im:()=>a,y1:()=>l});var o=n(409);async function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=await fetch(t,e);if(!n.ok){const t=await n.json().catch((()=>null)),e=t?.message||`HTTP error: ${n.status}`;throw new Error(e)}return n.json()}catch(e){throw console.error(`API Error (${t}):`,e),e}}n(522);const s={getAvatars:async function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return i(`${o.Hr.AVATARS}?${t}`)},getAvatarById:t=>i(`${o.Hr.AVATARS}/${t}`),getNarratives:t=>i(`${o.Hr.AVATARS}/${t}/narratives`),getActions:t=>i(`${o.Hr.AVATARS}/${t}/dungeon-actions`),getStats:t=>i(`${o.Hr.AVATARS}/${t}/stats`)},r={getStatus:t=>i(`${o.Hr.XAUTH}/status/${t}`),initiateAuth:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(`${o.Hr.XAUTH}/initiate/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},disconnect:t=>i(`${o.Hr.XAUTH}/disconnect/${t}`,{method:"POST"})},c={getStatus:t=>i(`${o.Hr.CLAIMS}/status/${t}`),claimAvatar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(`${o.Hr.CLAIMS}/claim/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},a={getCounts:()=>i(`${o.Hr.TRIBES}/counts`),getTribeByEmoji:t=>(t.includes("?"),i(`${o.Hr.TRIBES}/${t}`))},l={list:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return i(`${o.Hr.COLLECTIONS}?${t}`)},members:function(t){const e=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return i(`${o.Hr.COLLECTIONS}/${encodeURIComponent(t)}?${e}`)}},d={getActionLog:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return i(`${o.Hr.DUNGEON}/log?${t}`)}},m={getPosts:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return i(`${o.Hr.SOCIAL}/posts?${t}`)}},g={getLeaderboard:function(){const t=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return i(`${o.Hr.LEADERBOARD}?${t}`)}}}}]);