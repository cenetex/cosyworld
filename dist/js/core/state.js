export const state={wallet:null,activeTab:"squad",loading:!1,socialSort:"new",selectedAvatar:null,modalOpen:!1};export const STATE_EVENTS={WALLET_CHANGED:"wallet_changed",TAB_CHANGED:"tab_changed",LOADING_CHANGED:"loading_changed",SOCIAL_SORT_CHANGED:"social_sort_changed",AVATAR_SELECTED:"avatar_selected",MODAL_STATE_CHANGED:"modal_state_changed"};const eventListeners={};export function subscribe(t,e){return eventListeners[t]||(eventListeners[t]=[]),eventListeners[t].push(e),()=>{eventListeners[t]=eventListeners[t].filter((t=>t!==e))}}function emit(t,e){eventListeners[t]&&eventListeners[t].forEach((t=>t(e)))}export function setWallet(t){state.wallet=t,emit(STATE_EVENTS.WALLET_CHANGED,t),t?.publicKey?localStorage.setItem("lastWalletAddress",t.publicKey):localStorage.removeItem("lastWalletAddress")}export function setActiveTab(t){state.activeTab=t,emit(STATE_EVENTS.TAB_CHANGED,t);try{localStorage.setItem("lastActiveTab",t)}catch{}}export function setLoading(t){state.loading=t,emit(STATE_EVENTS.LOADING_CHANGED,t)}export function setSocialSort(t){state.socialSort=t,emit(STATE_EVENTS.SOCIAL_SORT_CHANGED,t)}export function setSelectedAvatar(t){state.selectedAvatar=t,emit(STATE_EVENTS.AVATAR_SELECTED,t)}export function setModalOpen(t){state.modalOpen=t,emit(STATE_EVENTS.MODAL_STATE_CHANGED,t)}export function initializeStateFromStorage(){const t=localStorage.getItem("lastWalletAddress");t&&(state.wallet={publicKey:t});const e=localStorage.getItem("lastActiveTab");e&&(state.activeTab=e)}window.state=state;